{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\Inimigo.js"],"names":["cc","Class","extends","Component","properties","alvo","Node","dano","Float","tempoAtaque","_cronometroAtaque","_movimentacao","_controleAnimacao","_gameOver","distanciaAtaque","onLoad","getComponent","audioMorte","AudioSource","find","node","on","morrer","update","deltaTime","direcao","position","sub","distancia","mag","mudaAnimacao","setDirecao","andarPraFrente","emit","eventoMorte","Event","EventCustom","dispatchEvent","destroy"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAML,GAAGM,IADD;AAERC,cAAOP,GAAGQ,KAFF;AAGRC,qBAAcT,GAAGQ,KAHT;AAIRE,2BAAoBV,GAAGQ,KAJf;AAKRG,uBAAgBX,GAAGG,SALX;AAMRS,2BAAoBZ,GAAGG,SANf;AAORU,mBAAYb,GAAGM,IAPP;AAQRQ,yBAAkBd,GAAGQ;;AARb,KAHP;;AAeLO,YAAQ,kBAAY;AAChB,aAAKJ,aAAL,GAAqB,KAAKK,YAAL,CAAkB,cAAlB,CAArB;AACA,aAAKJ,iBAAL,GAAyB,KAAKI,YAAL,CAAkB,oBAAlB,CAAzB;AACA,aAAKC,UAAL,GAAkB,KAAKD,YAAL,CAAkBhB,GAAGkB,WAArB,CAAlB;;AAEA,aAAKb,IAAL,GAAYL,GAAGmB,IAAH,CAAQ,wBAAR,CAAZ;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAa,YAAb,EAA2B,KAAKC,MAAhC,EAAwC,IAAxC;AACA,aAAKZ,iBAAL,GAAyB,KAAKD,WAA9B;AACH,KAvBI;;AAyBLc,YAAQ,gBAAUC,SAAV,EAAqB;AACzB,YAAIC,UAAU,KAAKpB,IAAL,CAAUqB,QAAV,CAAmBC,GAAnB,CAAuB,KAAKP,IAAL,CAAUM,QAAjC,CAAd;AACA,YAAIE,YAAYH,QAAQI,GAAR,EAAhB;AACA,aAAKjB,iBAAL,CAAuBkB,YAAvB,CAAoCL,OAApC,EAA6C,OAA7C;AACA,aAAKd,aAAL,CAAmBoB,UAAnB,CAA8BN,OAA9B;AACA,aAAKd,aAAL,CAAmBqB,cAAnB;;AAEA,aAAKtB,iBAAL,IAA0Bc,SAA1B;;AAEA,YAAGI,YAAY,KAAKd,eAAjB,IAAoC,KAAKJ,iBAAL,GAAyB,CAAhE,EAAkE;AAC9D,iBAAKL,IAAL,CAAU4B,IAAV,CAAe,WAAf,EAA4B,EAAC1B,MAAO,KAAKA,IAAb,EAA5B;AACA,iBAAKG,iBAAL,GAAyB,KAAKD,WAA9B;AACH;AACJ,KAtCI;;AAwCLa,YAAS,kBAAU;AACf,YAAIY,cAAc,IAAIlC,GAAGmC,KAAH,CAASC,WAAb,CAAyB,aAAzB,EAAwC,IAAxC,CAAlB;AACA,aAAKhB,IAAL,CAAUiB,aAAV,CAAwBH,WAAxB;AACA,aAAKd,IAAL,CAAUkB,OAAV;AAEH;;AA7CI,CAAT","file":"Inimigo.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        alvo: cc.Node,\n        dano : cc.Float,\n        tempoAtaque : cc.Float,\n        _cronometroAtaque : cc.Float,\n        _movimentacao : cc.Component,\n        _controleAnimacao : cc.Component,\n        _gameOver : cc.Node,\n        distanciaAtaque : cc.Float,\n\n    },\n\n    onLoad: function () {\n        this._movimentacao = this.getComponent(\"Movimentacao\");\n        this._controleAnimacao = this.getComponent(\"ControleDeAnimacao\");\n        this.audioMorte = this.getComponent(cc.AudioSource);\n\n        this.alvo = cc.find(\"Personagens/Personagem\");\n        this.node.on(\"SofrerDano\", this.morrer, this);\n        this._cronometroAtaque = this.tempoAtaque;\n    },\n\n    update: function (deltaTime) {\n        let direcao = this.alvo.position.sub(this.node.position);\n        let distancia = direcao.mag();\n        this._controleAnimacao.mudaAnimacao(direcao, \"Andar\");\n        this._movimentacao.setDirecao(direcao);\n        this._movimentacao.andarPraFrente();\n        \n        this._cronometroAtaque -= deltaTime;\n        \n        if(distancia < this.distanciaAtaque && this._cronometroAtaque < 0){\n            this.alvo.emit(\"SofreDano\", {dano : this.dano});\n            this._cronometroAtaque = this.tempoAtaque;\n        }\n    },\n\n    morrer : function(){\n        let eventoMorte = new cc.Event.EventCustom(\"ZumbiMorreu\", true);\n        this.node.dispatchEvent(eventoMorte);\n        this.node.destroy();\n\n    }\n\n\n\n\n\n\n});\n"]}