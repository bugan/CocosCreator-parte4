{"version":3,"sources":["GeradorDeChefes.js"],"names":["cc","Class","extends","Component","properties","tempoParaGerar","Float","chefePrefab","Prefab","alvo","Node","_pontosParaGerar","type","default","onLoad","director","getScene","on","adicionarAoGeradorDoChefe","schedule","gerar","evento","ponto","getUserData","node","push","buscarPontoMaisDistante","zumbi","instantiate","parent","position","maiorDistancia","selecionado","pontoAtual","vetorDistancia","distancia","i","length","sub","magSqr"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,wBAAgBL,GAAGM,KADX;AAERC,qBAAaP,GAAGQ,MAFR;AAGRC,cAAMT,GAAGU,IAHD;AAIRC,0BAAkB;AACdC,kBAAMZ,GAAGU,IADK;AAEdG,qBAAS;AAFK;AAJV,KAHP;;AAaLC,UAbK,oBAaI;AACLd,WAAGe,QAAH,CAAYC,QAAZ,GAAuBC,EAAvB,CAA0B,2BAA1B,EAAuD,KAAKC,yBAA5D,EAAuF,IAAvF;AACA,aAAKC,QAAL,CAAc,KAAKC,KAAnB,EAA0B,KAAKf,cAA/B;AACH,KAhBI;;;AAkBLa,+BAA2B,mCAASG,MAAT,EAAgB;AACvC,YAAIC,QAAQD,OAAOE,WAAP,GAAqBC,IAAjC;AACA,aAAKb,gBAAL,CAAsBc,IAAtB,CAA2BH,KAA3B;AACH,KArBI;;AAuBLF,WAAO,iBAAY;AACf,YAAIE,QAAQ,KAAKI,uBAAL,EAAZ;AACA,YAAIC,QAAQ3B,GAAG4B,WAAH,CAAe,KAAKrB,WAApB,CAAZ;AACAoB,cAAME,MAAN,GAAeP,MAAMO,MAArB;AACAF,cAAMG,QAAN,GAAiBR,MAAMQ,QAAvB;AACH,KA5BI;;AA8BLJ,6BAAyB,mCAAY;;AAEjC,YAAIK,iBAAiB,CAArB;AACA,YAAIC,cAAc,CAAlB;AACA,YAAIC,mBAAJ;AACA,YAAIC,uBAAJ;AACA,YAAIC,kBAAJ;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKzB,gBAAL,CAAsB0B,MAA1C,EAAkDD,GAAlD,EAAuD;;AAEnDH,yBAAa,KAAKtB,gBAAL,CAAsByB,CAAtB,CAAb;;AAEAF,6BAAiBD,WAAWH,QAAX,CAAoBQ,GAApB,CAAwB,KAAK7B,IAAL,CAAUqB,QAAlC,CAAjB;AACAK,wBAAYD,eAAeK,MAAf,EAAZ;AACA,gBAAIJ,YAAYJ,cAAhB,EAAgC;AAC5BC,8BAAcI,CAAd;AACAL,iCAAiBI,SAAjB;AACH;AACJ;AACD,eAAO,KAAKxB,gBAAL,CAAsBqB,WAAtB,CAAP;AACH;AAjDI,CAAT","file":"GeradorDeChefes.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        tempoParaGerar: cc.Float,\r\n        chefePrefab: cc.Prefab,\r\n        alvo: cc.Node,\r\n        _pontosParaGerar: {\r\n            type: cc.Node,\r\n            default: [],\r\n        },\r\n    },\r\n\r\n    onLoad() {\r\n        cc.director.getScene().on(\"adicionarAoGeradorDoChefe\", this.adicionarAoGeradorDoChefe, this);\r\n        this.schedule(this.gerar, this.tempoParaGerar);\r\n    },\r\n\r\n    adicionarAoGeradorDoChefe: function(evento){\r\n        let ponto = evento.getUserData().node;\r\n        this._pontosParaGerar.push(ponto);\r\n    },\r\n\r\n    gerar: function () {\r\n        let ponto = this.buscarPontoMaisDistante();\r\n        let zumbi = cc.instantiate(this.chefePrefab);\r\n        zumbi.parent = ponto.parent;\r\n        zumbi.position = ponto.position;\r\n    },\r\n\r\n    buscarPontoMaisDistante: function () {\r\n      \r\n        let maiorDistancia = 0;\r\n        let selecionado = 0;\r\n        let pontoAtual;\r\n        let vetorDistancia;\r\n        let distancia;\r\n        for (let i = 0; i < this._pontosParaGerar.length; i++) {\r\n            \r\n            pontoAtual = this._pontosParaGerar[i];\r\n            \r\n            vetorDistancia = pontoAtual.position.sub(this.alvo.position);\r\n            distancia = vetorDistancia.magSqr();\r\n            if (distancia > maiorDistancia) {\r\n                selecionado = i;\r\n                maiorDistancia = distancia;\r\n            }\r\n        }\r\n        return this._pontosParaGerar[selecionado];\r\n    }\r\n});\r\n"]}