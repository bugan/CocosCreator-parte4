{"version":3,"sources":["GeradorDeInimigos.js"],"names":["cc","Class","extends","Component","properties","tempoParaGerar","Float","raio","_distanciaMinima","_pool","onLoad","schedule","gerar","resolucao","director","getVisibleSize","metadeDaLargura","width","start","node","on","receberInstanciaPool","buscarPool","Event","EventCustom","setUserData","dispatchEvent","evento","detail","instancia","possoGerar","posicao","calcularPosicao","novoZumbi","parent","alcance","Vec2","Math","random","normalize","mul","position","add","distanciaAtual","sub","Camera","main","mag","longeOSuficiente"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,wBAAgBL,GAAGM,KADX;AAERC,cAAOP,GAAGM,KAFF;AAGRE,0BAAmBR,GAAGM,KAHd;AAIRG,eAAOT,GAAGG;AAJF,KAHP;;AAULO,YAAQ,kBAAY;AAChB,aAAKC,QAAL,CAAc,KAAKC,KAAnB,EAA0B,KAAKP,cAA/B;AACA,YAAIQ,YAAYb,GAAGc,QAAH,CAAYC,cAAZ,EAAhB;AACA,YAAIC,kBAAkBH,UAAUI,KAAV,GAAiB,CAAvC;AACA,aAAKT,gBAAL,GAAwBQ,eAAxB;AACH,KAfI;;AAiBLE,WAAO,iBAAU;AACb,aAAKC,IAAL,CAAUC,EAAV,CAAa,sBAAb,EAAqC,KAAKC,oBAA1C,EAAgE,IAAhE;AACA,YAAIC,aAAa,IAAItB,GAAGuB,KAAH,CAASC,WAAb,CAAyB,2BAAzB,EAAsD,IAAtD,CAAjB;AACAF,mBAAWG,WAAX,CAAuB,EAACN,MAAM,KAAKA,IAAZ,EAAvB;AACA,aAAKA,IAAL,CAAUO,aAAV,CAAwBJ,UAAxB;AACH,KAtBI;;AAwBLD,0BAAsB,8BAASM,MAAT,EAAgB;AAClC,aAAKlB,KAAL,GAAakB,OAAOC,MAAP,CAAcC,SAA3B;AACH,KA1BI;;AA4BLjB,WAAQ,iBAAU;AACd,YAAG,KAAKkB,UAAL,EAAH,EAAqB;AACjB,gBAAIC,UAAU,KAAKC,eAAL,EAAd;AACA,iBAAKvB,KAAL,CAAWwB,SAAX,CAAsB,KAAKd,IAAL,CAAUe,MAAhC,EAAwCH,OAAxC;AACH;AACJ,KAjCI;;AAmCLC,qBAAkB,2BAAU;AACxB,YAAIG,UAAU,IAAInC,GAAGoC,IAAP,CAAYC,KAAKC,MAAL,KAAe,GAA3B,EAAiCD,KAAKC,MAAL,KAAe,GAAhD,CAAd;AACAH,kBAAUA,QAAQI,SAAR,EAAV;AACAJ,kBAAUA,QAAQK,GAAR,CAAY,KAAKjC,IAAL,GAAY8B,KAAKC,MAAL,EAAxB,CAAV;;AAEA,YAAIP,UAAU,KAAKZ,IAAL,CAAUsB,QAAV,CAAmBC,GAAnB,CAAuBP,OAAvB,CAAd;AACA,eAAOJ,OAAP;AACH,KA1CI;;AA4CLD,gBAAa,sBAAU;AACnB,YAAIa,iBAAiB,KAAKxB,IAAL,CAAUsB,QAAV,CAAmBG,GAAnB,CAAuB5C,GAAG6C,MAAH,CAAUC,IAAV,CAAe3B,IAAf,CAAoBsB,QAA3C,CAArB;AACAE,yBAAiBA,eAAeI,GAAf,EAAjB;AACA,YAAIC,mBAAmBL,iBAAiB,KAAKnC,gBAA7C;AACA,eAAOwC,gBAAP;AACH;;AAjDI,CAAT","file":"GeradorDeInimigos.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        tempoParaGerar: cc.Float,\n        raio : cc.Float,\n        _distanciaMinima : cc.Float,\n        _pool: cc.Component,\n    },\n\n    onLoad: function () {\n        this.schedule(this.gerar, this.tempoParaGerar);\n        let resolucao = cc.director.getVisibleSize();\n        let metadeDaLargura = resolucao.width /2;\n        this._distanciaMinima = metadeDaLargura;\n    },\n\n    start: function(){\n        this.node.on(\"receberInstanciaPool\", this.receberInstanciaPool, this);\n        let buscarPool = new cc.Event.EventCustom(\"BuscarInstanciaPoolZumbis\", true);\n        buscarPool.setUserData({node: this.node});\n        this.node.dispatchEvent(buscarPool);\n    },\n\n    receberInstanciaPool: function(evento){\n        this._pool = evento.detail.instancia;\n    },\n\n    gerar : function(){\n        if(this.possoGerar()){\n            let posicao = this.calcularPosicao();\n            this._pool.novoZumbi( this.node.parent, posicao );\n        }\n    },\n\n    calcularPosicao : function(){\n        let alcance = new cc.Vec2(Math.random() -0.5 , Math.random() -0.5);\n        alcance = alcance.normalize();\n        alcance = alcance.mul(this.raio * Math.random());\n\n        let posicao = this.node.position.add(alcance);\n        return posicao;\n    },\n    \n    possoGerar : function(){\n        let distanciaAtual = this.node.position.sub(cc.Camera.main.node.position);\n        distanciaAtual = distanciaAtual.mag();\n        let longeOSuficiente = distanciaAtual > this._distanciaMinima;\n        return longeOSuficiente;\n    }\n\n});\n"]}